{% extends 'base.html' %}

{% load static %}

{% block css %}
  <style>
    .content__links {
      cursor: pointer;
      padding: 5px 0px 0px;
    }
    
    .side__bar {
      border-top-right-radius: 50px;
      border-bottom-right-radius: 5px;
      padding: 20px;
    }
    .top_dashboard {
      min-height: 70vh;
      /* background-color: rebeccapurple; */
    }
    
    .top_dashboard_content {
      min-height: 60vh;
      width: 100%;
      background-color: rgb(236, 244, 247);
      position: relative;
    
      border-radius: 5px;
      /* border-bottom: 2px solid black; */
      padding: 18px 28px;
    }
    
    /* search btn */
    .search-container {
      display: flex;
      align-items: center;
      background-color: #fff;
      padding: 5px;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      width: 80%;
      max-width: 600px;
    }
    
    .search-input {
      padding: 5px;
      width: 100%;
      font-size: 14px;
      border: none;
      outline: none;
      border-radius: 8px 0 0 8px;
    }
    
    .search-btn {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      background-color: #007bff;
      color: #fff;
      border-radius: 0 8px 8px 0;
      cursor: pointer;
      outline: none;
      flex-shrink: 0;
    }
    
    .search-btn:hover {
      background-color: #0056b3;
    }
    
    /* search btn end */
    
    .overview {
      width: 80%;
      /* background-color: yellow; */
      position: absolute;
      left: 10%;
      bottom: -15%;
      display: flex;
      justify-content: space-between;
    }
    
    .box {
      width: 30%;
      border-radius: 5px;
      padding: 20px;
      text-align: center;
      transition: all 0.3s;
    }
    
    .card {
      transition: all 0.3;
    }
    
    .card:hover,
    .box:hover {
      box-shadow: 2px 2px 10px 2px black;
      cursor: pointer;
    }
    
    .box1 {
      background-color: grey;
    }
    
    .box2 {
      background-color: green;
    }
    
    .box3 {
      background-color: red;
    }
    
    .overview__heading {
      font-size: 24px;
    }
    
    .overview_score {
      font-size: 18px;
      font-weight: 700;
    }
    
    .add_course_div {
      background-color: aqua;
      border-radius: 5px;
      padding: 20px;
      margin: 0px 5px;
    }
    
    /* categories */
    .card_col {
      width: 100%;
      padding: 10px;
    }
    .card_col:hover {
      background-color: whitesmoke;
    }
    
    .card__head {
      font-size: 48px;
      font-weight: 800;
      background-color: whitesmoke;
      width: 100%;
      height: 120px;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
{% endblock %}

{% block content %}
  <!-- Delete Confirmation -->
  <script type="text/javascript">
    function confirmDelete(event) {
      if (!confirm('Do you want to delete this item?')) {
        event.preventDefault()
      }
    }
  </script>

  <!-- Delete Confirmation end -->

  <div class="container-fluid mt-4">
    <div class="row">
      <div class="col-2 bg-primary side__bar">
        <h2>Online Learning</h2>
        <div class="tab">
          <p class="content__links" data-tab="dashboard">Dashboard</p>
          <p class="content__links" data-tab="profile">Profile</p>
          <p class="content__links" data-tab="categories">Categories</p>
          <p class="content__links" data-tab="courses">Add Courses</p>
        </div>
        <p>
          <a style="color: black; text-decoration: none; " href="{% url 'home' %}">Go Back</a>
        </p>
      </div>

      <!-- tab content -->
      <div class="col-10">
        <div id="dashboard" class="content">
          <div class="top_dashboard">
            <div class="top_dashboard_content">
              <div class="row">
                <div class="col-6">
                  <div class="heading">
                    <h4>Hi {{ request.user.first_name }}, Good Afternoon</h4>
                    <p>Manage Your Course Content</p>
                  </div>
                </div>
                <div class="col-6">
                  <div class="search-container">
                    <input type="text" class="search-input" id="searchInput" placeholder="Search..." />
                    <button class="search-btn" onclick="searchItems()">Search</button>
                  </div>
                </div>
              </div>
              <div class="overview">
                <div class="box box1">
                  <h5 class="overview__heading">No. of Videos Upload</h5>
                  <p class="overview_score">50</p>
                </div>
                <div class="box box2">
                  <h5 class="overview__heading">No. of Student Enroll</h5>
                  <p class="overview_score">250</p>
                </div>
                <div class="box box3">
                  <h5 class="overview__heading">No. of Categories Created</h5>
                  <p class="overview_score">10</p>
                </div>
              </div>
            </div>
          </div>
          <!-- categories -->
          <div class="row mt-4">
            <div class="col">
              <h4>Top Courses</h4>
              <div class="row mt-4">
                {% if user.is_authenticated %}
                  {% for course in all_course %}
                    {% if request.user.username == course.created_by %}
                      <div class="col-6">
                        <div class="card mb-3" style="width:100%">
                          <div class="row g-0">
                            <div class="col-md-4">
                              <img src="{{ course.course_image.url }}" class="img-fluid rounded-start" alt="Course Image" style="height: 180px;" />
                              <div class="row text-center mt-2">
                                <div class="col">
                                  <a href="#" class="btn btn-primary">Update</a>
                                </div>
                              </div>
                              <div class="row text-center mt-2">
                                <div class="col">
                                  <a href="#" class="btn btn-danger">Delete</a>
                                </div>
                              </div>
                            </div>
                            <div class="col-md-8">
                              <div class="card-body">
                                <h5 class="card-title">{{ course.course_title }}</h5>
                                <p class="card-text">{{ course.course_desc }}</p>
                                <p class="card-text">{{ course.category }}</p>
                                <p class="card-text">Created By: {{ course.created_by }}</p>
                                <p class="card-text">{{ course.price }}</p>
                                <a class="btn btn-primary" href="{% url 'course_details' course.id %}" style="text-decoration: none; width: 100%;">See Course Details</a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    {% endif %}
                  {% endfor %}
                {% else %}
                  <p>Please log in to see your courses.</p>
                {% endif %}
              </div>
            </div>
          </div>
        </div>

        <!-- tab2 -->
        <div id="profile" class="content">
          <h1>Tab 2</h1>

          <p>Artificial Intelligence (AI) refers to the simulation of human intelligence in machines that are programmed to think and learn like humans. It encompasses a broad range of technologies and applications, aiming to mimic cognitive functions such as problem-solving, learning, reasoning, perception, language understanding, and decision-making.

            Neural Networks: Inspired by the human brain, neural networks are a fundamental component of deep learning, a branch of machine learning. They consist of interconnected nodes (neurons) organized in layers, where each layer processes information and passes it on to the next.

            Natural Language Processing (NLP): NLP focuses on the interaction between computers and humans through natural language. It enables machines to understand, interpret, and generate human language, facilitating tasks like language translation, sentiment analysis, and chatbots.</p>
        </div>

        <!-- tab 3 Categories -->
        <div id="categories" class="content">
          <h1>Categories</h1>
          <a style="text-decoration: none;" href="{% url 'add_category' %}" class="btn btn-primary">Add Category</a>

          <div class="row" style="padding: 10px;">
            {% for i in all_categories %}
              {% if request.user.username == i.created_by %}
                <div class="col-3">
                  <div class="card" style="width: 100%;">
                    <div class="card-body">
                      <div class="card__head">{{ i.cate_title|slice:':1' }}</div>

                      <p style="text-align: center;font-size: 24px; font-weight: bolder;" class="card-text">{{ i.cate_title }}</p>
                      <center>
                        <a class="btn btn-primary" href="{% url 'update_category' i.id %}" style="text-decoration: none;">Update</a>
                        <a class="btn btn-danger" href="#" onclick="confirmDelete(event, '{% url 'delete_category' i.id %}')" style="text-decoration: none;">Delete</a>
                      </center>
                    </div>
                  </div>
                </div>
              {% endif %}
            {% endfor %}
          </div>
        </div>

        <!-- tab 4 Course -->
        <div id="courses" class="content">
          <div class="row">
            <div class="col">
              <div class="add_course_div">
                <h3>Add Course</h3>
                <a style="text-decoration: none;" href="{% url 'add_course' %}" class="btn btn-primary">Add Course</a>
              </div>
            </div>
          </div>

          <div class="row mt-4">
            {% if user.is_authenticated %}
              {% for course in all_course %}
                {% if request.user.username == course.created_by %}
                  <div class="col-6">
                    <div class="card mb-3" style="width:100%">
                      <div class="row g-0">
                        <div class="col-md-4">
                          <img src="{{ course.course_image.url }}" class="img-fluid rounded-start" alt="Course Image" style="height: 180px;" />
                          <div class="row text-center mt-2">
                            <div class="col">
                              <a href="#" class="btn btn-primary">Update</a>
                            </div>
                          </div>
                          <div class="row text-center mt-2">
                            <div class="col">
                              <a href="#" class="btn btn-danger">Delete</a>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-8">
                          <div class="card-body">
                            <h5 class="card-title">{{ course.course_title }}</h5>
                            <p class="card-text">{{ course.course_desc }}</p>
                            <p class="card-text">{{ course.category }}</p>
                            <p class="card-text">Created By: {{ course.created_by }}</p>
                            <p class="card-text">{{ course.price }}</p>
                            <a class="btn btn-primary" href="{% url 'course_details' course.id %}" style="text-decoration: none; width: 100%;">See Course Details</a>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                {% endif %}
              {% endfor %}
            {% else %}
              <p>Please log in to see your courses.</p>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container-fluid">
    <div class="row">
      <div class="col"></div>
    </div>
  </div>

  <!-- Tabs JavaScript -->
  <script type="text/javascript">
    const tabButtons = document.querySelectorAll('.content__links')
    tabButtons.forEach((button) => {
      button.addEventListener('click', function () {
        let tabName = this.dataset.tab
        let tabContent = document.getElementById(tabName)
    
        let allTabContent = document.querySelectorAll('.content')
        let allTabButtons = document.querySelectorAll('.content__links')
    
        allTabContent.forEach((content) => {
          content.style.display = 'none'
        })
    
        allTabButtons.forEach((button) => {
          button.classList.remove('active')
        })
    
        tabContent.style.display = 'block'
        this.classList.add('active')
      })
    })
    
    document.querySelector('.content__links').click() // Automatically click the first tab to display its content
  </script>
{% endblock %}
